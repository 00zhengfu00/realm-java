apply plugin: 'java'

version = new File("${rootDir}/version.txt").text
sourceCompatibility = '1.6'
targetCompatibility = '1.6'

repositories {
    jcenter()
}

dependencies {
    compile group:'com.squareup', name:'javawriter', version:'2.5.0'
    compile files("../realm-annotations/build/libs/realm-annotations-${version}.jar")
}

jar {
    from configurations.compile.findAll {it.name.contains('javawriter')}.collect { zipTree(it) }
}

task compileAnnotations(type: GradleBuild) {
    dir = file('../realm-annotations')
    tasks = ['assemble']
}

tasks.assemble {
    dependsOn compileAnnotations
}